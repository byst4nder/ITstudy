第一部分 基础知识

本书的第一部分介绍编写 Python 程序所需要熟悉的基本概念，其中很多都适用于所有编程语言，因此它们在你的整个程序员生涯中都很有用。

第 1 章介绍在计算机中安装 Python，并运行第一个程序——它在屏幕上打印消息「Hello world!」。

第 2 章论述如何在变量中存储信息以及如何使用文本和数字。

第 3 章和第 4 章介绍列表。使用列表能够在一个变量中存储任意数量的信息，从而高效地处理数据：只需几行代码，你就能够处理数百、数千乃至数百万个值。

第 5 章讲解使用 if 语句来编写这样的代码：在特定条件满足时采取一种措施，而在该条件不满足时采取另一种措施。

第 6 章演示如何使用 Python 字典，将不同的信息关联起来。与列表一样，你也可以根据需要在字典中存储任意数量的信息。

第 7 章讲解如何从用户那里获取输入，以让程序变成交互式的。你还将学习 while 循环，它不断地运行代码块，直到指定的条件不再满足为止。

第 8 章介绍编写函数。函数是执行特定任务的被命名的代码块，你可以根据需要随时运行它。

第 9 章介绍类，它让你能够模拟实物，如小狗、小猫、人、汽车、火箭等，让你的代码能够表示任何真实或抽象的东西。

第 10 章介绍如何使用文件，以及如何处理错误以免程序意外地崩溃。你需要在程序关闭前保存数据，并在程序再次运行时读取它们。你将学习 Python 异常，它们让你能够未雨绸缪，从而让程序妥善地处理错误。

第 11 章为代码编写测试，以核实程序是否像你期望的那样工作。这样，扩展程序时，你就不用担心引入新的 bug。要想脱离初级程序员的阵容，跻身于中级程序员的行列，测试代码是你必须掌握的基本技能之一。

# 第1章 起步

在本章中，你将运行自己的第一个程序——hello_world.py。为此，你首先需要检查自己的计算机是否安装了 Python；如果没有安装，你需要安装它。你还要安装一个文本编辑器，用于编写和运行 Python 程序。你输入 Python 代码时，这个文本编辑器能够识别它们并突出显示不同的部分，让你能够轻松地了解代码的结构。

## 1.1 搭建编程环境

在不同的操作系统中，Python 存在细微的差别，因此有几点你需要牢记在心。这里将介绍大家使用的两个主要的 Python 版本，并简要介绍 Python 的安装步骤。

### 1.1.1 Python 2 和 Python 3

当前，有两个不同的 Python 版本：Python 2 和较新的 Python 3。每种编程语言都会随着新概念和新技术的推出而不断发展，Python 的开发者也一直致力于丰富和强化其功能。大多数修改都是逐步进行的，你几乎意识不到，但如果你的系统安装的是 Python 3，那么有些使用 Python 2 编写的代码可能无法正确地运行。在本书中，我将指出 Python 2 和 Python 3 的重大差别，这样无论你安装的是哪个 Python 版本，都能够按书中的说明去做。

如果你的系统安装了这两个版本，请使用 Python 3；如果没有安装 Python，请安装 Python 3；如果只安装了 Python 2，也可直接使用它来编写代码，但还是尽快升级到 Python 3 为好，因为这样你就能使用最新的 Python 版本了。

### 1.1.2 运行 Python 代码片段

Python 自带了一个在终端窗口中运行的解释器，让你无需保存并运行整个程序就能尝试运行 Python 代码片段。

本书将以如下方式列出代码片段：

❶ >>> print("Hello Python interpreter!")

Hello Python interpreter!

加粗的文本表示需要你输入之后按回车键来执行的代码。本书的大多数示例都是独立的小程序，你将在编辑器中执行它们，因为大多数代码都是这样编写出来的。然而，为高效地演示某基本概念，需要在 Python 终端会话中执行一系列代码片段。只要代码清单中包含三个尖括号（如 ❶ 所示），就意味着输出来自终端会话。稍后将演示如何在 Python 解释器中编写代码。

### 1.1.3 Hello World程序

长期以来，编程界都认为刚接触一门新语言时，如果首先使用它来编写一个在屏幕上显示消息「Hello world!」的程序，将给你带来好运。

要使用 Python 来编写这种 Hello World 程序，只需一行代码：

print("Hello world!")

这种程序虽然简单，却有其用途：如果它能够在你的系统上正确地运行，你编写的任何 Python 程序都将如此。稍后将介绍如何在特定的系统中编写这样的程序。

## 1.2 在不同操作系统中搭建 Python 编程环境

Python 是一种跨平台的编程语言，这意味着它能够运行在所有主要的操作系统中。在所有安装了 Python 的现代计算机上，都能够运行你编写的任何 Python 程序。然而，在不同的操作系统中，安装 Python 的方法存在细微的差别。

在这一节中，你将学习如何在自己的系统中安装 Python 和运行 Hello World 程序。你首先要检查自己的系统是否安装了 Python，如果没有，就安装它；接下来，你需要安装一个简单的文本编辑器，并创建一个空的 Python 文件——hello_world.py。最后，你将运行 Hello World 程序，并排除各种故障。我将详细介绍如何在各种操作系统中完成这些任务，让你能够搭建一个对初学者友好的 Python 编程环境。

### 1.2.1 在 Linux 系统中搭建 Python 编程环境

Linux 系统是为编程而设计的，因此在大多数 Linux 计算机中，都默认安装了 Python。编写和维护 Linux 的人认为，你很可能会使用这种系统进行编程，他们也鼓励你这样做。鉴于此，要在这种系统中编程，你几乎不用安装什么软件，也几乎不用修改设置。

### 1.2.2　在 OS X 系统中搭建 Python 编程环境

大多数 OS X 系统都默认安装了 Python。确定安装了 Python 后，你还需安装一个文本编辑器，并确保其配置正确无误。

#### 01. 检查是否安装了 Python

在文件夹 Applications/Utilities 中，选择 Terminal，打开一个终端窗口；你也可以按 Command + 空格键，再输入 terminal 并按回车。为确定是否安装了 Python，请执行命令 python （注意，其中的 p 是小写的）。输出将类似于下面这样，它指出了安装的 Python 版本；最后的 >>> 是一个提示符，让你能够输入 Python 命令。

```
$ python

Python 2.7.5 (default, Mar 9 2014, 22:15:05)

[GCC 4.2.1 Compatible Apple LLVM 5.0 (clang-500.0.68)] on darwin

Type "help", "copyright", "credits", or "license" for more information.

>>>
```

上述输出表明，当前计算机默认使用的 Python 版本为 Python 2.7.5。看到上述输出后，如果要退出 Python 并返回到终端窗口，可按 Ctrl + D 或执行命令 exit() 。

1『原来 Ctrl + D 也能退出 python 终端。』

要检查系统是否安装了 Python 3，可尝试执行命令 python3 。可能会出现一条错误消息，但如果输出指出系统安装了 Python 3，则无需安装就可使用它。如果在你的系统中能够执行命令 python3 ，则对于本书的所有命令 python ，都请替换为命令 python3 。如果不知道出于什么原因你的系统没有安装 Python，或者只安装了 Python 2，而你又想安装 Python 3，请参阅附录 A。

#### 02. 在终端会话中运行 Python 代码

你可以打开一个终端窗口并执行命令 python 或 python3 ，再尝试运行 Python 代码片段。检查 Python 版本时，你就这样做过。下面再次这样做，但在终端会话中输入如下代码行：

```
>>> print("Hello Python interpreter!")

Hello Python interpreter!

>>>
```

消息将直接打印到当前终端窗口中。别忘了，要关闭 Python 解释器，可按 Ctrl + D 或执行命令 exit() 。

#### 03. 安装文本编辑器

Sublime Text 是一款简单的文本编辑器：它在 OS X 中易于安装；让你能够直接运行几乎所有程序（而无需通过终端）；使用不同的颜色来显示代码，以突出代码语法；在内嵌在 Sublime Text 窗口内的终端会话中运行代码，让你能够轻松地查看输出。附录 B 介绍了其他一些文本编辑器，但我强烈建议你使用 Sublime Text，除非你有充分的理由不这样做。

要下载 Sublime Text 安装程序，可访问 [Download - Sublime Text](https://www.sublimetext.com/3)，单击 Download 链接，并查找 OS X 安装程序。Sublime Text 的许可策略非常灵活，你可以免费使用这款编辑器，但如果你喜欢它并想长期使用，建议你购买许可证。下载安装程序后，打开它，再将 Sublime Text 图标拖放到 Applications 文件夹。

#### 04. 配置 Sublime Text 使其使用 Python 3

如果你启动 Python 终端会话时使用的命令不是 python ，就需要配置 Sublime Text，让它知道到系统的什么地方去查找正确的 Python 版本。要获悉 Python 解释器的完整路径，请执行如下命令：

	$ type -a python3

	python3 is /usr/local/bin/python3

现在，启动 Sublime Text，并选择菜单Tools ▶ Build System ▶ New Build System，这将打开一个新的配置文件。删除其中的所有内容，再输入如下内容：

```
{

"cmd": ["/usr/local/bin/python3", "-u", "$file"],

}
```

这些代码让 Sublime Text 使用命令 python3 来运行当前打开的文件。请确保其中的路径为你在前一步使用命令 type -a python3 获悉的路径。将这个配置文件命名为 Python3.sublime-build，并将其保存到默认目录——你选择菜单 Save 时 Sublime Text 打开的目录。

#### 05. 运行 Hello World 程序

为编写第一个程序，需要启动 Sublime Text。为此，可打开文件夹 Applications，并双击图标 Sublime Text；也可按 Command + 空格键，再在弹出的搜索框中输入 sublime text。

创建一个用于存储项目的文件夹，并将其命名为 python_work（在文件名和文件夹名中，最好使用小写字母，并使用下划线来表示空格，因为这是 Python 采用的命名约定）。在 Sublime Text 中，选择菜单File ▶ Save As，将当前的空 Python 文件保存到文件夹python_work，并将其命名为 hello_world.py。扩展名 .py 告诉 Sublime Text，文件包含的是 Python 程序；它还让 Sublime Text 知道如何运行该程序，并以有益的方式突出其中的代码。

保存文件后，在其中输入下面一行代码：

	print("Hello Python world!")

如果在系统中能够运行命令python ，就可选择菜单Tools ▶ Build或按Ctrl + B来运行程序。如果你对Sublime Text进行了配置，使其使用的命令不是python ，请选择菜单Tools ▶ Build System，再选择Python 3。这将把Python 3设置为默认使用的Python版本；此后，你就可选择菜单Tools ▶ Build或按Command+ B来运行程序了。






Sublime Text窗口底部将出现一个终端屏幕，其中包含如下输出：

Hello Python world!

[Finished in 0.1s]





如果没有看到这样的输出，请检查你输入的每个字符。你是不是将





print 的首字母大写了？是不是遗漏了引号或括号？编程语言对语法的要求非常严格，只要你没有严格遵守语法，就会出错。如果代码都正确，这个程序也不能正确地运行，请参阅1.3节。

### 1.2.3 在 Windows 系统中搭建 Python 编程环境

Windows 系统并非都默认安装了 Python，因此你可能需要下载并安装它，再下载并安装一个文本编辑器。

如果没有看到这样的输出，请检查你输入的每个字符。你是不是将 print 的首字母大写了？是不是遗漏了引号或括号？编程语言对语法的要求非常严格，只要你没有严格遵守语法，就会出错。如果代码都正确，这个程序也不能正确地运行，请参阅下一节。

## 1.3 解决安装问题

如果你按前面的步骤做，应该能够成功地搭建编程环境。但如果你始终无法运行程序hello_world.py，可尝试如下几个解决方案。



程序存在严重的错误时，Python将显示traceback。Python会仔细研究文件，试图找出其中的问题。trackback可能会提供线索，让你知道是什么问题让程序无法运行。



离开计算机，先休息一会儿，再尝试。别忘了，在编程中，语法非常重要，即便是少一个冒号、引号不匹配或括号不匹配，都可能导致程序无法正确地运行。请再次阅读本章相关的内容，再次审视你所做的工作，看看能否找出错误。



推倒重来。你也许不需要把一切都推倒重来，但将文件hello_world.py删除并重新创建它也许是合理的选择。



让别人在你的计算机或其他计算机上按本章的步骤重做一遍，并仔细观察。你可能遗漏了一小步，而别人刚好没有遗漏。



请懂Python的人帮忙。当你有这样的想法时，可能会发现在你认识的人当中就有人使用Python。



本章的安装说明在网上也可以找到，其网址为https://www.nostarch.com/pythoncrash-course/ 。对你来说，在线版也许更合适。



到网上寻求帮助。附录C提供了很多在线资源，如论坛或在线聊天网站，你可以前往这些地方，请求解决过你面临的问题的人提供解决方案。





不要担心这会打扰经验丰富的程序员。每个程序员都遇到过问题，而大多数程序员都会乐意帮助你正确地设置系统。只要能清晰地说明你要做什么、尝试了哪些方法及其结果，就很可能有人能够帮到你。正如前言中指出的，Python社区对初学者非常友好。





任何现代计算机都能够运行Python，如果你遇到了困难，请想办法寻求帮助吧。前期的问题可能令人沮丧，但很值得你花时间去解决。能够运行hello_world.py后，你就可以开始学习Python了，而且编程工作会更有趣，也更令人愉快。





## 1.4 从终端运行 Python 程序

你编写的大多数程序都将直接在文本编辑器中运行，但有时候，从终端运行程序很有用。例如，你可能想直接运行既有的程序。





在任何安装了Python的系统上都可以这样做，前提是你知道如何进入程序文件所在的目录。为尝试这样做，请确保已将文件hello_world.py存储到了桌面的python_work文件夹中。


1.4.1　在Linux和OS X系统中从终端运行Python程序

在Linux和OS X系统中，从终端运行Python程序的方式相同。在终端会话中，可使用终端命令cd （表示切换目录 ，change directory）在文件系统中导航。命令ls （list的简写）显示当前目录中所有未隐藏的文件。

为运行程序hello_world.py，请打开一个新的终端窗口，并执行下面的命令：



❶ ~$ cd Desktop/python_work/

❷ ~/Desktop/python_work$ ls

hello_world.py

❸ ~/Desktop/python_work$ python hello_world.py

Hello Python world!





这里使用了命令cd 来切换到文件夹Desktop/python_work（见❶）。接下来，使用命令ls 来确认这个文件夹中包含文件hello_world.py（见❷）。最后，使用命令python hello_world.py 来运行这个文件（见❸）。

就这么简单。要运行Python程序，只需使用命令python （或





python3 ）即可。

1.4.2　在Windows系统中从终端运行Python程序

在命令窗口中，要在文件系统中导航，可使用终端命令cd ；要列出当前目录中的所有文件，可使用命令dir （表示目录， directory）。

为运行程序hello_world.py，请打开一个新的终端窗口，并执行下面的命令：



❶ C:\> cd Desktop\python_work

❷ C:\Desktop\python_work> dir

hello_world.py

❸ C:\Desktop\python_work> python hello_world.py

Hello Python world!





这里使用了命令cd 来切换到文件夹Desktop\python_work（见❶）。接下来，使用命令dir 来确认这个文件夹中包含文件hello_world.py（见❷）。最后，使用命令python hello_world.py 来运行这个文件（见❸）。

如果你没有对系统进行配置以使用简单命令python ，就可能需要指定这个命令的路径：



C:\$ cd Desktop\python_work

C:\Desktop\python_work$ dir

hello_world.py

C:\Desktop\python_work$ C:\Python35\python hello_world.py

Hello Python world!





大多数程序都可以直接从编辑器运行，但需要解决的问题比较复杂时，你编写的程序可能需要从终端运行。

动手试一试

本章的练习都是探索性的，但从第2章开始将要求你用那一章学到的知识来解决问题。

1-1 python.org ：浏览Python主页（http://python.org/ ），寻找你感兴趣的主题。你对Python越熟悉，这个网站对你来说就越有用。

1-2 输入错误 ：打开你刚创建的文件hello_world.py，在代码中添加一个输入错误，再运行这个程序。输入错误会引发错误吗？你能理解显示的错误消息吗？你能添加一个不会导致错误的输入错误吗？你凭什么认为它不会导致错误？





1-3 无穷的技艺 ：如果你编程技艺无穷，你打算开发什么样的程序呢？你就要开始学习编程了；如果心中有目标，就能立即将新学到的技能付诸应用；现在正是草拟目标的大好时机。将想法记录下来是个不错的习惯，这样每当需要开始新项目时，都可参考它们。现在请花点时间描绘三个你想创建的程序。

## 1.5 小结

在本章中，你大致了解了 Python，并在自己的系统中安装了 Python。你还安装了一个文本编辑器，以简化 Python 代码的编写工作。你学习了如何在终端会话中运行 Python 代码片段，并运行了第一个货真价实的程序——hello_world.py。你还大致了解了如何解决安装问题。

在下一章，你将学习如何在 Python 程序中使用各种数据和变量。
