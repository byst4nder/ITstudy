# 2018002. 搭梯子

## 直接 VPN

### 手机
进 iphone 的设置 > VPN，点最下面的「添加 VPN 配置」进去后。「类型」选 L2TP；「描述」自己起个名字；「服务器」把 IP 地址填上，比如「13.250.33.20」；「账户」把账户名填上；「RSA SecirID」勾线上；「密钥」把密码填上。

### Mac
进系统的偏好设置，进「网络」设置；点左下角的 + 号增加一个 VPN 节点；把基本信息填了，比如服务器地址、账户名；点「鉴定设置里」把密码输了，共享密钥就填「IPsec PSK」信息。

## 用 ssr 搭梯子

### 1. 注册 paypal 账号

paypal 注册地址：https://www.paypal.com，paypal 是国际知名的第三方支付服务商，注册一下账号，绑定银行卡即可购买国外商品。

dalong0514@；dalong0514；

### 2. 购买 VPS 服务器
VPS 服务器需要选择国外的，首选国际知名的 vultr，速度不错、稳定且性价比高，按小时计费，能够随时开通和删除服务器，新服务器即是新 ip。

[vultr注册地址。](http://www.vultr.com/?ref=7048874 )

dalong0514@；Dalong0514；

充值完之后按 GitHub 上的教程购买 1 个 VPS 服务器；注意系统选 centos6x64 位的。

完成购买后，找到系统的密码记下来，部署服务器时需要用到；IP「45.77.247.60」Password「H!7jEM[EwE6)MHs(」

如果你开启了 vps 的 ipv6，那么在后台的 settings 选项可以找到服务器的 ipv6 ip。在部署 SSR 账号时，你用 ipv6 ip 就行。整个部署及使用过程中，记得把电脑系统开启 ipv6 喔。

### 3. 部署 VPS 服务器
购买服务器后，需要部署一下。因为你买的是虚拟东西，而且又远在国外，我们需要一个叫 Xshell 的软件来远程部署。如果你是苹果电脑操作系统，更简单，无需下载 xshell，系统可以直接连接 VPS。打开终端「Terminal」，输入ssh root@ip 其中「ip」替换成你 VPS 的 ip, 按回车键，然后复制粘贴密码，按回车键即可登录。粘贴密码时有可能不显示密码，但不影响； 比如 ssh root@45.32.49.32
最开始试了一个输入命令 ssh 根本不出现提示密码的，换了 1 个服务器重新试即可。

连接成功后，会出现如上图所示，用户名就变成 root@vultr，之后就可以复制粘贴代码部署了。

CentOS6/Debian6/Ubuntu14 ShadowsocksR 一键部署管理脚本：

yum -y install wget

wget -N --no-check-certificate https://softs.fun/Bash/ssr.sh && chmod +x ssr.sh && bash ssr.sh

备用脚本：

yum -y install wget

wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh && chmod +x ssr.sh && bash ssr.sh

复制上面的代码到 VPS 服务器里，按回车键，脚本会自动安装，以后只需要运行这个快捷命令就可以出现下图的界面进行设置，快捷管理命令为：bash ssr.sh

如上图出现管理界面后，输入数字 1 来安装 SSR 服务端。如果输入 1 后不能进入下一步，那么请退出 xshell，重新连接 vps 服务器，然后输入快捷管理命令 bash ssr.sh 再尝试。

根据上图提示，依次输入自己想设置的端口和密码 「密码建议用复杂点的字母组合，dalong0514，端口号为 40-65535 之间的数字」，回车键用于确认。

注：关于端口的设置，总的网络总端口有 6 万多个，理论上可以任意设置。但是有的地区需要设置特殊的端口才有效，一些特殊的端口比如 80、143、443、1433、3306、3389、8080。

默认端口 2333，比如设成 2222。

如上图，选择想设置的加密方式，比如 10「aes-256-cfb」，按回车键确认。

接下来是选择协议插件，如下图：选 2「auth_shal_v4」。

选择并确认后，会出现上图的界面，提示你是否选择兼容原版，这里的原版指的是 SS 客户端「SS 客户端没有协议和混淆的选项」，可以根据需求进行选择，演示选择 y 之后进行混淆插件的设置。

注意：如果协议是 origin，那么混淆也必须是 plain；如果协议不是 origin，那么混淆可以是任意的。有的地区需要把混淆设置成 plain 才好用。因为混淆不总是有效果，要看各地区的策略，有时候不混淆「plain」让其看起来像随机数据更好。（特别注意：tls 1.2_ticket_auth 容易受到干扰！请选择除 tls 开头以外的其它混淆！！！）

进行混淆插件的设置后，会依次提示你对设备数、单线程限速和端口总限速进行设置，默认值是不进行限制，个人使用的话，选择默认即可，即直接敲回车键。

注意：关于限制设备数，这个协议必须是非原版且不兼容原版才有效，也就是必须使用 SSR 协议的情况下，才有效！

之后代码就正式自动部署了，到下图所示的位置，提示你下载文件，输入：y

耐心等待一会，出现下面的界面即部署完成。

根据上图就可以看到自己设置的 SSR 账号信息，包括 IP、端口、密码、加密方式、协议插件、混淆插件，这些信息需要填入你的 SSR客户端。如果之后想修改账号信息，直接输入快捷管理命令：bash ssr.sh 进入管理界面，选择相应的数字来进行一键修改。

脚本演示结束。此脚本是开机自动启动，部署一次即可。最后可以重启服务器确保部署生效「一般情况不重启也可以」。重启需要在命令栏里输入 reboot ，输入命令后稍微等待一会服务器就会自动重启，一般重启过程需要 2～5 分钟，重启过程中 Xshell 会自动断开连接，等 VPS 重启好后才可以用 Xshell 软件进行连接。如果部署过程中卡在某个位置超过 10 分钟，可以用 xshell 软件断开，然后重新连接你的 ip，再复制代码进行部署。

### 4. 一键加速 VPS 服务器「此步骤不用弄」
此加速教程为谷歌 BBR 加速，Vultr 的服务器框架可以装 BBR 加速，加速后对速度的提升很明显，所以推荐部署加速脚本。该加速方法是开机自动启动，部署一次就可以了。按照第二步的步骤，连接服务器 ip，登录成功后，在命令栏里粘贴以下代码：

yum -y install wget
wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh
chmod +x bbr.sh
./bbr.sh

把上面整个代码复制后粘贴进去，不动的时候按回车，然后耐心等待，最后重启 vps 服务器即可。

演示开始，复制并粘贴代码后，按回车键确认；如下图提示，按任意键继续部署，部署到上图这个位置的时候，等待 3～6 分钟；最后输入 y 重启服务器，如果输入 y 提示 command not found ，接着输入 reboot 来重启服务器，确保加速生效，bbr 加速脚本是开机自动启动，装一次就可以了。

服务器重启成功并重新连接服务器后，输入命令 lsmod | grep bbr 如果出现 tcp_bbr 字样表示 bbr 已安装并启动成功。

### 5. SSR 客户端下载
第一次电脑系统使用 SSR/SS 客户端时，如果提示你需要安装 NET Framework 4.0，网上搜一下这个东西，安装一下即可。NET Framework 4.0 是 SSR/SS 的运行库，没有这个 SSR/SS 客户端无法正常运行。有的电脑系统可能会自带 NET Framework 4.0。

Mac 上下载的软件是 Showdowshocks。

苹果手机 SSR 客户端 Potatso Lite、Potatso、shadowrocket 都可以作为 SSR 客户端，但这些软件目前已经在国内的 app 商店下架，可以用美区的 appid 账号来下载。但是，如果你配置的 SSR 账号兼容 SS 客户端，或者协议选择 origin 且混淆选择 plain，那么你可以选择苹果 SS 客户端软件「即协议和混淆可以不填」，APP 商店里面有很多，比如：superwingy、firstwingy、shadowingy、wingy+、banananet、kite-ss proxy、goodshadow、icproyx、shadowrocket 等。

有了账号后，打开 SSR 客户端，填上信息；在对应的位置，填上服务器 ip、服务器端口、密码、加密方式、协议和混淆，最后将浏览器的代理设置为（http）127.0.0.1 和 1080 即可。账号的端口号就是你自己设置的，而要上网的浏览器的端口号是 1080，固定的，谷歌浏览器可以通过 SwitchyOmega 插件来设置。

启动 SSR 客户端后，右键 SSR 客户端图标，选择第一个「系统代理模式」，里面有 3 个子选项，选择「全局模式」，之后就可以用浏览器设置好了的代理模式（http）127.0.0.1 和 1080 翻墙，此模式下所有的网站都会走 SSR 代理。

手机的客户端选的是 FirstWingy；

## VPN 途径
吴侃提供的 VPN：green_vpn;green_user;green_user!!!

VPN 很好配的，可以去 github 搜 setup-ipsec-vpn 就好了。一般使用都没什么问题，就是不太稳定。

## 坑

1、不要一键加速 VPS 服务器，弄了就连不上网了。

